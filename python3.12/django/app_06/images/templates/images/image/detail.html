{% extends 'base.html' %}
{% block title %}
    {{ image.title }}
{% endblock title %}

{% block content %}
    <h1>{{ image.title }}</h1>
    {% load thumbnail %}
        <a href="{{ image.image.url }}">
            <img src="{% thumbnail image.image 300x0 %}" alt="img-thumbnail" class="image-detail">
        </a>
    {% with total_likes=image.users_like.count %}
    <div class="image-info">
        <div><span class="count">
            {{ total_likes }} like{{ total_likes|pluralize }}
        </span></div>
        {{ image.description|linebreaks }}
    </div>
    <div class="image-likes">
        {% for user in image.users_like.all %}
        {% if user.profile.photo %}
            <img src="{{ user.profile.photo.url }}" alt="user_img">
            
        {% endif %}
            <p>{{ user.first_name }}</p>
        {% empty %}
            No likes for this image
        {% endfor %}
    </div>      
    {% endwith %}
{% endblock content %}